# Семинар 1. Работа в терминале, текстовые редакторы и IDE

При запуске терминала linux происходит запуск командной оболочки (shell). Таких на сегодняшний день несколько, например, `bash` и `zsh`. Мы будем использовать `bash` (у вас он почти наверное будет использоваться по умолчанию).

В системе может быть много пользователей. Несколько пользователей можно объединить в группы. Нас будет интересовать только 2 пользователя: вы и `root`. Но на самом деле их больше и новые приложения могут создавать своих пользователей для работы в системе.

Все файлы в linux лежат в корневой директории (папка `/`), даже если на вашем ПК несколько дисков. Это корень файловой системы, пользовательские файлы нужно класть в директорию `~` или `/home/$USER`, где `$USER` это ник пользователя, который указывается при установке linux.

## Базовые команды терминала Linux

Все обозначения в угловых скобках (вида `<name>`) &mdash; плейсхолдеры. Это значит, что вы можете вставлять туда разные значения в зависимости от контекста.

```bash
echo $USER # Вывести имя текущего пользователя
echo $SHELL # Вывести путь до командной оболочки

whoami # Второй способ вывести имя пользователя

pwd # Абсолютный путь до текущей (рабочей) директории

ls # Содержимое текущей директории
ls <dirname> # Содержимое директории <dirname>
ls --list # Вывести подробную информацию о каждом файле
ls -l # Аналогично команде выше, но короче
ls --all # Показать также скрытые файлы
ls -a # Аналогично команде выше, но короче
ls --human-readable # human readable размер файлов (килобайты, мегабайты, ...)
ls -h # Аналогично команде выше, но короче
ls -R # Вывести файлы рекурсивно по всем подпапкам

# Можно использовать несколько флагов одновременно (работает для всех команд терминала со своими флагами)
ls --list --all --human-readable
ls -l -a -h # Более короткая запись
ls -lah # Ещё короче

# Если нужно больше флагов или вы забыли, за что они отвечают
ls --help

# Переход по директориям
cd .. # Директория на уровень выше
cd - # Предыдущая посещённая директория
cd ~ # Домашняя директория
cd ~<username> # Домашняя директория пользователя <username>

mkdir <dir> # Создать директорию <dir>
mkdir -p <path>/<to>/<dir> # Создать директорию и все промежуточные при необходимости

touch <name> # Так можно создать файл, но сама команда делает немного другое

cat <file> # Вывести содержимое файла

# Открытие файлов в разных текстовых редакторах
nano <file>
vim <file>

cp <file> <new_file> # Скопировать файл. Вместо названия файла можно указывать путь до него
mv <file> <new_file> # Переместить файл (предыдущий удаляется)
rm <file> # Удалить файл
which <file>

grep <pattern> <file> # Вывести строки с вхождением <pattern> в файле <file>
grep -n <pattern> <file> # Вывести также номер строки
grep -R <pattern> <dir> # Найти в директории <dir> вхождения <pattenr> во все файлы

# | это pipe
cat <file> | grep <pattern>

head -9 <file> # Вывести первые 9 строк файла
tail -7 <file> # Вывести последние 7 строк файла

sudo apt-get update # Проверить обновления для установленных команд (обновить состояние индекса из репозиториев)
sudo apt-get upgrade # Установить обновления, которые мы нашли предыдущей командой

cat /etc/passwd # Вывести существующих пользователей
cat /etc/group # Вывести существующие группы пользователей
```

Важно помнить, что тут перечислены далеко не все команды и их флаги, а только самые распространённые и наиболее часто используемые в повседневной жизни. Если вам нужно что-то экзотическое &mdash; первым делом загуглите. Например, в русскоязычном сегменте довольно хорошие статьи по линуксовым командам есть на сайте [losst.pro](https://losst.pro), то есть гуглить стоит `<utility> losst`.

Если же вы знаете, что какая-то команда делает нужное вам действие, но вы забыли флаг или синтаксис &mdash; можно написать `<cmd> --help | grep bla-bla-bla`. Также документацию можно попробовать найти в мане: `man <cmd>`.

Скрытыми файлами/папками в линуксе считаются **те и только те файлы**, которые **начинаются с точки**. Например, `.bashrc`, `.`, `..`.

`.` и `..` &mdash; это ссылки на текущую папку и на папку на уровень выше. Если мы находимся в `/usr/lib`, то `ls .` выведет содержимое папки `/usr/lib`, а `ls ..` выведет содержимое папки `/usr/`.

При работе с linux важно понимать, что расширения файлов не значат ровным счётом ничего. C точки зрения прав, есть 3 способа взаимодействия с файлом и 3 возможных категории доступа к файлу.

Способы взаимодействия с файлом:

- r &mdash; чтение файла
- w &mdash; запись в файл
- e &mdash; исполнение файла (чтобы мы могли запустить файл как программу)

Категории доступа:

- u &mdash; доступ к файлу для пользователя, который его создал
- g &mdash; доступ к файлу для группы пользователей, к которой принадлежит юзер
- o &mdash; доступ к файлу остальным пользователям

Менять эти доступы можно с помощью команды `chmod`. Например, так:

```bash
chmod o+x # Разрешить всем остальным пользователям запускать файл
chmod g-w # Запретить группе пользователей изменять файл
chmod +r # Разрешить юзеру, группе и всем остальным пользователям читать файл
```

В файловой системе linux все объекты считаются файлами. Файлы подразделяются на несколько типов: регулярные файлы, директории, символические ссылки (symbolic link), символьные устройства и другие. Мы почти всегда будем работать с первыми 2 типами, однако символические ссылки тоже часто встречаются (например, `g++` и `clang++` это на самом деле символические ссылки на конкретную версию компилятора, такую как `g++-11` или `g++-13`).

Ещё к каждой команде можно добавить префикс `sudo`. Этот префикс будет означать, что мы выполняем команду от имени пользователя `root` &mdash; то есть у нас больше прав для выполнения команды. Например, это может понадобиться для записи каких-то файлов в директорию `/bin` или `/usr/bin/`, куда у обычного пользователя есть право только на чтение.

## more и less

`more` и `less` используются для просмотра больших файлов, потому что при открытии не загружают весь файл целиком в оперативную память. `less` является по сути надстройкой над `more` и имеет больше функций, поэтому лучше использовать его. Откроем, например, исходники вектора:

```bash
less /usr/include/c++/13/bits/stl_vector.h
```

Перечислим некоторые флаги:

- `-n`, `-N` &mdash; отключение/включение нумерации строк
- `<n>g` &mdash; переход к `n`-й строке в файле
- `g`, `G` &mdash; перейти в начало/конец файла
- `/`, `?` &mdash; поиск с начала и с конца файла. `n` и `N` в данном случае можно использовать для перемещения по вхождениям
- `q` &mdash; выход

## nano

TODO

## Шорткаты обычных текстовых редакторов и браузеров

- Передвижение через слово с помощью комбинации `ctrl+<стрелка>` или `alt+<стрелка>`
- `Home`, `End` &mdash; перемещение в начало/конец строки
- Выделение текста в помощью `shift` и стрелок
- `ctrl+shift+c` / `ctrl+shift+v` &mdash; копирование/вставка
- `ctrl+backspace` или `alt+backspace` &mdash; удаление по слову
- `ctrl++`, `ctrl+-` &mdash; масштабирование (иногда нужно зажать `shift`)

## Горячие клавиши в системе

- `alt+F4` &mdash; закрыть текущее приложение/окно.
- `alt+tab` &mdash; переключение окон
- `ctrl+tab`, `ctrl+shift+tab` &mdash; переключение вперёд/назад между вкладками в браузере

## vscode

User Interface: [link](https://code.visualstudio.com/docs/getstarted/userinterface):

- Editor
- Primary Side Bar
- Status Bar
- Activity Bar
- Panel

Palette

Guide for C++ in vscode: [code.visualstudio.com](https://code.visualstudio.com/docs/cpp/config-linux).

See some VScode extenstions in [vscode_extensions.md](./vscode_extensions.md).

<!-- --------------------------------------------------------- -->

## .bashrc и .vimrc

Для более точной настройки терминала можно использовать файлы `.bashrc` и `.vimrc`. Они хранят настройки для `bash`-а в терминале и `vim` соответственно.

## Shortcuts

Различные обозначения `ctrl+v` (полезно для чтения других док):

- `ctrl+V` (если нужен `shift`, об этом пишут явно)
- `<C-v>`
- `^V`

Для быстрой навигации можно использовать специальные клавиатурные сокращения.

- Когда набираете путь, можно набрать первые n букв и нажать `tab`. Тогда произойдёт автодополнение пути. Если вариантов несколько, то нужно нажать `tab` ещё раз и будут выведены возможные варианты.
- Для повторного выполнения команды, которая использовалась раньше, можно использовать стрелки `&uarr;` и `&darr;` &mdash; это выведет предыдущую и следующую команды соответственно.
- `ctrl+A` и `ctrl+E` &mdash; переместиться в начало/конец строки терминала
- Для перемещения вправо-влево по строке терминала используются стрелки `&larr;` и `&rarr;`. Чтобы перемещаться быстрее (не по одному символу, а по одному слову за клик), можно зажать клавишу `alt`
- `ctrl+W` &mdash; стереть всё предыдущее слово
- `ctrl+U` &mdash; стереть всю строку
- `ctrl+R` &mdash; поиск по предыдущим командам. Лучше установить `fzf finder` [отсюда](https://github.com/junegunn/fzf) и там же посмотреть документацию по использованию


## Сигналы

Исполняющиеся файлы могут взаимодействовать с операционной системой через специальные сигналы. Посылать эти сигналы можно из терминала с помощью шорткатов. Несколько распространённых:

- `ctrl+D` (`ctrl+Z` на Windows) &mdash; отправить программе сигнал EOF (End Of File)
- `ctrl+С` или `ctrl+/` &mdash; принудительно завершить программу, но дать возможность завершить/сохранить некоторые критически важные компоненты
- `ctrl+U` &mdash; "убить" программу. Не даёт возможности программе исполняться дальше ни при каких обстоятельствах

Шорткаты могут различаться для разных дистрибутивов. Посмотреть список всех шорткатов для сигналов можно командой (на Ubuntu):

```bash
# Ubuntu
stty -a

# BSD
stty -e
```

Также сигналы можно передавать, используя утилиту `kill` и `pid` процесса (можно почитать [тут](https://losst.pro/kak-ubit-protsess-linux)). Так можно использовать гораздо больше сигналов, но мы не будем вдаваться в детали, оставляя читателю возможность попрактиковаться в этом самостоятельно.
